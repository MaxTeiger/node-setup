version: '3.7'
services:
  nethermind:
    init: true
    container_name: poa-sokol-archive
    image: nethermind/nethermind:latest
    environment:
      NETHERMIND_ETHSTATSCONFIG_ENABLED: "true"
      NETHERMIND_ETHSTATSCONFIG_SERVER: "${ETHSTATS_SERVER}"
      NETHERMIND_ETHSTATSCONFIG_SECRET: "${ETHSTATS_SECRET}"
      NETHERMIND_ETHSTATSCONFIG_CONTACT: "${ETHSTATS_CONTACT}"
      NETHERMIND_ETHSTATSCONFIG_NAME: "${ETHSTATS_ID}"
      NETHERMIND_CONFIG: sokol_archive
      NETHERMIND_SYNCCONFIG_FASTSYNC: "false"
      NETHERMIND_SYNCCONFIG_FASTBLOCKS: "false"
      NETHERMIND_JSONRPCCONFIG_ENABLED: "true"
      NETHERMIND_JSONRPCCONFIG_HOST: 0.0.0.0
      NETHERMIND_SYNCCONFIG_DOWNLOADBODIESINFASTSYNC: "true"
      NETHERMIND_SYNCCONFIG_DOWNLOADRECEIPTSINFASTSYNC: "true"
      NETHERMIND_PRUNINGCONFIG_MODE: "None"
      NETHERMIND_INITCONFIG_CHAINSPECPATH: "/spec.json"
      #NETHERMIND_NETWORKCONFIG_BOOTNODES: "enode://539b12a8abe4ef25dcee819f94f9bb983695aa50865364c76aa7240edca4f538ae0ab007003f7f3ded3998575a58d2c15dae700811be59b02d5a122930974869@104.248.49.16:30303,enode://879c39f3537f30c7f8f5b564e469854a27eb046a524c384882d237973f5ba812007e269c3dcc8643dea04e1560ad549664254ac33d2c327798aaad4abaa33cd2@20.203.142.145:30303,enode://7c129728b5e07311acb598da6440ac705b79c3ca1e09930546d9eced95e6bc5915cee5279c12c9a948a173d85e781e12041f4b77492fe5019e51da7dee357e6e@20.203.168.72:30303"
#      NETHERMIND_NETWORKCONFIG_BOOTNODES: "enode://b619878df9da0bf06ce0b9d9aef9612d180c2dfdd2b9cd85d64af9f56391ff5ec64d16ed2130cba991313c04328f7e2329d856a14256a6bc162397f5f1f0b98d@144.126.232.139:30303,enode://cfc39059db82d1a81b6e95ecc461b2468199242593d4bebbbb14de21e9db7e1febda6af108b5d259ad1d05abe1d81951c4e32e77787320ad8a59e4ec7dfa293d@64.227.38.111:30303,enode://b619878df9da0bf06ce0b9d9aef9612d180c2dfdd2b9cd85d64af9f56391ff5ec64d16ed2130cba991313c04328f7e2329d856a14256a6bc162397f5f1f0b98d@159.65.95.116:30303"    
    volumes:
      - ./data/logs:/nethermind/logs
      - ./data/keystore:/nethermind/keystore
      - ./data/nethermind_db:/nethermind/nethermind_db
      - ./spec.json:/spec.json
    ports:
      - "30303:30303"
      - "30303:30303/udp"
      - "30313:30313"
      - "30313:30313/udp"
      - "8545:8545"
    restart: unless-stopped
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "10"

